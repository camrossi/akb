<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>NKT - NDFC Login</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" type="text/css"
                               href="{{ url_for('static',filename='assets/cui-2.0.0/css/cui-standard.min.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='assets/cui-2.0.0/css/frame.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='assets/cui-2.0.0/css/style.css') }}">
        <script src="{{ url_for('static',filename='assets/cui-2.0.0/js/jquery-3.0.0.min.js') }}"></script>
     
     
     
        
        
        
                <style>
        .chevron ul.tabs li.active a {
            background-color: #017cad !important;
            opacity: 1 !important;
            color: #ffffff;
            box-shadow: none !important;
        }

      .chevron ul.tabs li a {
          height: 56px min-width: 90% !important;
          padding: 10px 6px;
          background-color: #ffffff;
          opacity: 1 !important;
          color: #58585d;
          text-align: center;
          position: relative;
          line-height: 16px;
          font-size: 12px;
          cursor: pointer;
          flex: 1 !important;
          flex-shrink: 1 !important;
          flex-wrap: wrap !important;
          display: flex !important;
          justify-content: center !important;
      }
        </style>
    </head>




    <form name="loginForm" method="post" action="/login?fabric_type={{ fabric_type }}">

        <body class="cui cui--animated cui--compressed" data-theme="">
            <div id="oneui">
                <!-- Main Content -->
                <header class="header" id="_uid818d10e3">
                    <div class="container">
                        <div class="header-panels">
                            <div class="header-panel">
                                <a href="http://www.cisco.com" target="_blank" class="header__logo" id="_uid5a704e92">
                                    <span class="icon-cisco"></span>
                                </a>
                                 <div class="header__title">Nexus Kubernetes Tools - Version {{session['version']}}</div>
                            </div>
                            <div class="header-panel header-panel--right">
                                <a data-hreftarget="_self" target="_self" data-hreflink="https://github.com/camrossi/akb" href="https://github.com/camrossi/akb" data-hreftitle="Source Code" title="Source Code" class="header-item" id="_uidb14b144f">GitHub</a><a data-hreftarget="_self" target="_self" data-hreflink="https://github.com/camrossi/akb/issues" href="https://github.com/camrossi/akb/issues" data-hreftitle="Open An Issue" title="Open An Issue" class="header-item" id="_uid2e094e7e">Open An Issue
                                </a>
                            </div>
                        </div>
                    </div>
                </header>
                <div class="flexrow">
                    <div class="cell"></div>
                    <div class="cell"> </div>
                </div>
                <div class="container bg-gray">
                    <h2>NDFC Login details</h2>
                    <p>
                    <br> Specify the credentials to login your Nexus Dashboard
                    </p>
                </div>
                <div class="container">
                    <div id="alert_fail" class="alert alert--warning" style="display: none">
                        <div class="alert__icon icon-warning-outline"></div>
                        <div id="alert_fail_msg" class="alert__message"></div>
                    </div>

                    <table class="table table--compressed table--selectable table--wrap c1990" id="_uid829dc898">

                        <tbody>
                            <tr>
                                <td>Nexus Dashboard IP or hostname</td>
                                <td><input id="url" type="text" size=25 name="nd"></td>
                            </tr>
                            <tr>
                                <td>Username:</td>
                                <td><input id="username" type="text" size=25 name="username" value="admin"></td>
                            </tr>
                            <tr>
                                <td>Password:</td>
                                <td><input id="password" type="password" size=25 name="password"></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="container">
                                        <input type="Button" value="Login" class="btn btn--wide" name="button" id="login">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <table width="20%" bgcolor="0099CC" align="center">



                </table>
                <br><br><br><br><br><br>
                <div class="container">
                    <footer class="footer footer--tertiary" id="_uidca388897">
                        <div class="footer__links">
                            <ul class="list list--inline" id="_uid08010aa3">
                                <li><a href="http://www.cisco.com/cisco/web/siteassets/contacts/index.html" target="_blank" id="_uidbb5636c3">Contacts</a></li>
                                <li><a href="https://secure.opinionlab.com/ccc01/o.asp?id=jBjOhqOJ" target="_blank" id="_uid92d9bfeb">Feedback</a></li>
                                <li><a href="https://www.cisco.com/c/en/us/about/help.html" target="_blank" id="_uidcbd80f09">Help</a></li>
                                <li><a href="http://www.cisco.com/c/en/us/about/sitemap.html" target="_blank" id="_uid134ab5bc">Site Map</a></li>
                                <li><a href="https://www.cisco.com/c/en/us/about/legal/terms-conditions.html" target="_blank" id="_uidf3e2c0a6">Terms &amp; Conditions</a></li>
                                <li><a href="https://www.cisco.com/c/en/us/about/legal/privacy-full.html" target="_blank" id="_uide8b9adf9">Privacy Statement</a></li>
                                <li><a href="https://www.cisco.com/c/en/us/about/legal/privacy-full.html#cookies" target="_blank" id="_uid5580971c">Cookie Policy</a></li>
                                <li><a href="https://www.cisco.com/c/en/us/about/legal/trademarks.html" target="_blank" id="_uidbe7db422">Trademarks</a></li>
                            </ul>
                        </div>
                    </footer>
                </div>



                <div class="form-group base-margin-bottom"></div>
                <main class="c549">
                    <div></div>
                </main>
                <!-- End Main Content -->
            </div>
            <div id="canvas"></div>
            <script>
                $(document).ready(function () {
                    $('body').find('[data-oneuihighcharts="container"]').each((key, val) => {
                        var finalJson = val.getAttribute('data-highchartfinaljson') || '[]';
                        var myChart = Highcharts.chart(val, JSON.parse(finalJson));
                    })
                })
                $('#canvas').on('click', function () {
                    html2canvas(document.body, {}).then(canvas => {
                        html2canvas(document.body, {}).then(canvas => {
                            document.body.appendChild(canvas);
                            getCanvas = canvas;
                            var imgageData = getCanvas.toDataURL('image/png');
                            var newData = imgageData.replace(
                                /^data:image\/png/,
                                'data:application/octet-stream'
                            );
                            // console.log(newData);
                            document.getElementById('canvas').setAttribute("data-title", newData);
                            /**
                             * remove canvas and link after download
                             */
                            document.querySelector('canvas').remove();
                        });
                    });
                });
            </script>
        </body>
        <script>
            var login = function(e){
                var update_url = "{{ url_for("login")}}" + '?fabric_type=' + getUrlParameter('fabric_type');
                $.ajax({
                    url: update_url,
                    type: 'post',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        url: $("#url").val(),
                        username: $("#username").val(),
                        password: $("#password").val(),
                    }),
                    success: function (data, status, xhr) {
                        $(location).attr('href',"{{ url_for("fabric") }}?fabric_type=vxlan_evpn");
                    },
                    error: function (xhr, status, error) {
                        var error_msg = JSON.parse(xhr.responseText)
                        $("#alert_fail_msg").text(error_msg.error)
                        $("#alert_fail").fadeIn(500).delay(1000).fadeOut(500);
                    }
                })
            };

            $(document).ready(function () {
                $("#password").on("keypress", function(e){
                    if (e.key == "Enter") {
                        login();
                    };
                });
                $("#login").on("click", login);
            });
        </script>

</html>
